{"ast":null,"code":"import axios from 'axios';\nimport { CREATE_SOLDIER_START, CREATE_SOLDIER_FAIL, CREATE_SOLDIER_SUCCESS } from '../reducers/types';\n\nconst createSoldierStart = () => ({\n  type: CREATE_SOLDIER_START\n});\n\nconst createSoldierFail = error => ({\n  type: CREATE_SOLDIER_FAIL,\n  error\n});\n\nconst createSoldierSuccess = () => ({\n  type: CREATE_SOLDIER_SUCCESS\n});\n\nexport const createSoldier = (query, avatar, history) => dispatch => {\n  const endPoint = \"http://localhost:4000/api/soldier\";\n  dispatch(createSoldierStart());\n  return axios.post(endPoint, query).then(res => {\n    const data = new FormData();\n    data.append(\"avatar\", avatar);\n\n    if (!avatar) {\n      dispatch(createSoldierSuccess());\n      history.push(\"/\");\n      return;\n    }\n\n    return axios.post(`${endPoint}/avatar/${res.data.id}`, data).then(() => {\n      dispatch(createSoldierSuccess());\n      history.push(\"/\");\n    }).catch(err => {\n      dispatch(createSoldierFail({\n        message: \"Updating soldier avatar failed\"\n      }));\n    });\n  }).catch(err => {\n    dispatch(createSoldierFail({\n      message: \"Creating soldier failed\"\n    }));\n  });\n};","map":{"version":3,"sources":["/Users/caroline/Desktop/interview/practice/us-army/src/client/redux/action-creators/create-soldier.js"],"names":["axios","CREATE_SOLDIER_START","CREATE_SOLDIER_FAIL","CREATE_SOLDIER_SUCCESS","createSoldierStart","type","createSoldierFail","error","createSoldierSuccess","createSoldier","query","avatar","history","dispatch","endPoint","post","then","res","data","FormData","append","push","id","catch","err","message"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,oBAAT,EAA8BC,mBAA9B,EAAkDC,sBAAlD,QAAgF,mBAAhF;;AAEA,MAAMC,kBAAkB,GAAG,OAAO;AAChCC,EAAAA,IAAI,EAAEJ;AAD0B,CAAP,CAA3B;;AAIA,MAAMK,iBAAiB,GAAGC,KAAK,KAAK;AAClCF,EAAAA,IAAI,EAAEH,mBAD4B;AAElCK,EAAAA;AAFkC,CAAL,CAA/B;;AAKA,MAAMC,oBAAoB,GAAG,OAAO;AAClCH,EAAAA,IAAI,EAAEF;AAD4B,CAAP,CAA7B;;AAIA,OAAO,MAAMM,aAAa,GAAG,CAACC,KAAD,EAAOC,MAAP,EAAcC,OAAd,KAA2BC,QAAD,IAAc;AACnE,QAAMC,QAAQ,GAAG,mCAAjB;AACAD,EAAAA,QAAQ,CAACT,kBAAkB,EAAnB,CAAR;AACA,SAAOJ,KAAK,CAACe,IAAN,CAAWD,QAAX,EAAoBJ,KAApB,EACNM,IADM,CACAC,GAAD,IAAS;AACb,UAAMC,IAAI,GAAG,IAAIC,QAAJ,EAAb;AACAD,IAAAA,IAAI,CAACE,MAAL,CAAY,QAAZ,EAAqBT,MAArB;;AACA,QAAI,CAACA,MAAL,EAAa;AACXE,MAAAA,QAAQ,CAACL,oBAAoB,EAArB,CAAR;AACAI,MAAAA,OAAO,CAACS,IAAR,CAAa,GAAb;AACA;AACD;;AACD,WAAOrB,KAAK,CAACe,IAAN,CAAY,GAAED,QAAS,WAAUG,GAAG,CAACC,IAAJ,CAASI,EAAG,EAA7C,EAA+CJ,IAA/C,EACNF,IADM,CACD,MAAM;AACVH,MAAAA,QAAQ,CAACL,oBAAoB,EAArB,CAAR;AACAI,MAAAA,OAAO,CAACS,IAAR,CAAa,GAAb;AACD,KAJM,EAKNE,KALM,CAKAC,GAAG,IAAI;AACZX,MAAAA,QAAQ,CAACP,iBAAiB,CAAC;AAAEmB,QAAAA,OAAO,EAAE;AAAX,OAAD,CAAlB,CAAR;AACD,KAPM,CAAP;AAQD,GAjBM,EAkBNF,KAlBM,CAkBAC,GAAG,IAAI;AACZX,IAAAA,QAAQ,CAACP,iBAAiB,CAAC;AAAEmB,MAAAA,OAAO,EAAE;AAAX,KAAD,CAAlB,CAAR;AACD,GApBM,CAAP;AAqBD,CAxBM","sourcesContent":["import axios from 'axios';\r\nimport { CREATE_SOLDIER_START,CREATE_SOLDIER_FAIL,CREATE_SOLDIER_SUCCESS } from '../reducers/types';\r\n\r\nconst createSoldierStart = () => ({\r\n  type: CREATE_SOLDIER_START\r\n});\r\n\r\nconst createSoldierFail = error => ({\r\n  type: CREATE_SOLDIER_FAIL,\r\n  error\r\n});\r\n\r\nconst createSoldierSuccess = () => ({\r\n  type: CREATE_SOLDIER_SUCCESS\r\n});\r\n\r\nexport const createSoldier = (query,avatar,history) => (dispatch) => {\r\n  const endPoint = \"http://localhost:4000/api/soldier\";\r\n  dispatch(createSoldierStart());\r\n  return axios.post(endPoint,query)\r\n  .then((res) => {\r\n    const data = new FormData();\r\n    data.append(\"avatar\",avatar);\r\n    if (!avatar) {\r\n      dispatch(createSoldierSuccess());\r\n      history.push(\"/\");\r\n      return;\r\n    }\r\n    return axios.post(`${endPoint}/avatar/${res.data.id}`,data)\r\n    .then(() => {\r\n      dispatch(createSoldierSuccess());\r\n      history.push(\"/\");\r\n    })\r\n    .catch(err => {\r\n      dispatch(createSoldierFail({ message: \"Updating soldier avatar failed\" }));\r\n    });\r\n  })\r\n  .catch(err => {\r\n    dispatch(createSoldierFail({ message: \"Creating soldier failed\" }));\r\n  });\r\n};"]},"metadata":{},"sourceType":"module"}